<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CrewMatch - AI Team Matching</title>
    <link rel="stylesheet" href="matching.css">
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDDyWH-g-2zO90lL6xY-4Yl8_RzKZjgPdI&libraries=places"></script>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-left">
                <div class="logo">
                    <span class="logo-text">üéØ CrewMatch</span>
                </div>
            </div>
            <div class="nav-right">
                <button class="groups-btn">üë• Groups</button>
                <button id="profileBtn" class="profile-btn">Profile</button>
                <button class="back-btn" onclick="goHome()">‚Üê Back to Home</button>
            </div>
        </div>
    </nav>

    <!-- Profile Creation Section -->
    <div id="profileSection" class="section active">
        <div class="container">
            <div class="profile-header">
                <h1>Create Your Profile</h1>
                <p>Tell us about yourself so we can find your perfect teammates</p>
            </div>

            <form id="profileForm" class="profile-form">
                <!-- Basic Info -->
                <div class="form-section">
                    <h2>Basic Information</h2>
                    
                    <div class="form-group">
                        <label for="fullName">Full Name *</label>
                        <input type="text" id="fullName" name="fullName" placeholder="Your name" required>
                    </div>

                    <div class="form-group">
                        <label for="email">Email *</label>
                        <input type="email" id="email" name="email" placeholder="your@email.com" required>
                    </div>

                    <div class="form-group">
                        <label for="branch">Branch/Field of Study *</label>
                        <select id="branch" name="branch" required>
                            <option value="">Select your branch</option>
                            <option value="cse">Computer Science & Engineering</option>
                            <option value="ece">Electronics & Communication</option>
                            <option value="mech">Mechanical Engineering</option>
                            <option value="civil">Civil Engineering</option>
                            <option value="design">Design & UI/UX</option>
                            <option value="business">Business & Management</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                </div>

                <!-- Skills -->
                <div class="form-section">
                    <h2>Your Skills</h2>
                    <p class="section-desc">Select at least 3 skills</p>
                    
                    <div class="skills-grid">
                        <label class="skill-checkbox">
                            <input type="checkbox" name="skills" value="leadership">
                            <span class="skill-label">üë• Leadership</span>
                        </label>
                        <label class="skill-checkbox">
                            <input type="checkbox" name="skills" value="coding">
                            <span class="skill-label">üíª Coding</span>
                        </label>
                        <label class="skill-checkbox">
                            <input type="checkbox" name="skills" value="design">
                            <span class="skill-label">üé® Design</span>
                        </label>
                        <label class="skill-checkbox">
                            <input type="checkbox" name="skills" value="communication">
                            <span class="skill-label">üí¨ Communication</span>
                        </label>
                        <label class="skill-checkbox">
                            <input type="checkbox" name="skills" value="problem-solving">
                            <span class="skill-label">üß© Problem Solving</span>
                        </label>
                        <label class="skill-checkbox">
                            <input type="checkbox" name="skills" value="research">
                            <span class="skill-label">üî¨ Research</span>
                        </label>
                        <label class="skill-checkbox">
                            <input type="checkbox" name="skills" value="marketing">
                            <span class="skill-label">üì± Marketing</span>
                        </label>
                        <label class="skill-checkbox">
                            <input type="checkbox" name="skills" value="project-management">
                            <span class="skill-label">üìä Project Management</span>
                        </label>
                    </div>
                </div>

                <!-- Personality Traits -->
                <div class="form-section">
                    <h2>Personality Traits</h2>
                    <p class="section-desc">How would you describe yourself?</p>
                    
                    <div class="traits-grid">
                        <label class="trait-radio">
                            <input type="radio" name="trait1" value="introvert">
                            <span class="trait-label">ü§´ Introvert</span>
                        </label>
                        <label class="trait-radio">
                            <input type="radio" name="trait1" value="extrovert">
                            <span class="trait-label">üéâ Extrovert</span>
                        </label>

                        <label class="trait-radio">
                            <input type="radio" name="trait2" value="analytical">
                            <span class="trait-label">üß† Analytical</span>
                        </label>
                        <label class="trait-radio">
                            <input type="radio" name="trait2" value="creative">
                            <span class="trait-label">‚ú® Creative</span>
                        </label>

                        <label class="trait-radio">
                            <input type="radio" name="trait3" value="organized">
                            <span class="trait-label">üìã Organized</span>
                        </label>
                        <label class="trait-radio">
                            <input type="radio" name="trait3" value="flexible">
                            <span class="trait-label">üåä Flexible</span>
                        </label>

                        <label class="trait-radio">
                            <input type="radio" name="trait4" value="collaborative">
                            <span class="trait-label">ü§ù Collaborative</span>
                        </label>
                        <label class="trait-radio">
                            <input type="radio" name="trait4" value="independent">
                            <span class="trait-label">ü¶∏ Independent</span>
                        </label>
                    </div>
                </div>

                <!-- Goals & Interests -->
                <div class="form-section">
                    <h2>What Are You Looking For?</h2>
                    
                    <div class="form-group">
                        <label for="goal">Primary Goal *</label>
                        <select id="goal" name="goal" required>
                            <option value="">Select your primary goal</option>
                            <option value="hackathon">Hackathon Participation</option>
                            <option value="startup">Startup Building</option>
                            <option value="learning">Learning & Growth</option>
                            <option value="competition">Competition</option>
                            <option value="project">Project Development</option>
                            <option value="networking">Networking</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="bio">Tell us about yourself (Bio)</label>
                        <textarea id="bio" name="bio" placeholder="Share your interests, achievements, or what makes you unique..." rows="4"></textarea>
                    </div>
                </div>

                <!-- Location Preference -->
                <div class="form-section">
                    <h2>Work Location Preference</h2>
                    <p class="section-desc">Where do you prefer to collaborate?</p>
                    
                    <div class="location-grid">
                        <label class="location-option">
                            <input type="radio" name="locationPreference" value="remote" required>
                            <div class="location-card">
                                <span class="location-icon">üíª</span>
                                <span class="location-name">Remote</span>
                                <span class="location-desc">Work from anywhere</span>
                            </div>
                        </label>
                        <label class="location-option">
                            <input type="radio" name="locationPreference" value="in-person" required onchange="showCampusLocations()">
                            <div class="location-card">
                                <span class="location-icon">üè¢</span>
                                <span class="location-name">In-Person</span>
                                <span class="location-desc">Meet on campus/office</span>
                            </div>
                        </label>
                        <label class="location-option">
                            <input type="radio" name="locationPreference" value="hybrid" required>
                            <div class="location-card">
                                <span class="location-icon">üîÑ</span>
                                <span class="location-name">Hybrid</span>
                                <span class="location-desc">Mix of both</span>
                            </div>
                        </label>
                    </div>

                    <!-- Google Maps for Campus Locations -->
                    <div id="locationMapContainer" style="display: none; margin-top: 2rem;">
                        <p class="section-desc" style="margin-bottom: 1rem;">üìç Select your campus or meeting location:</p>
                        <div id="locationMap" style="width: 100%; height: 300px; border-radius: 15px; border: 2px solid rgba(124, 58, 237, 0.3); overflow: hidden; margin-bottom: 1rem;"></div>
                        <div id="locationsList" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 0.8rem;"></div>
                        <input type="hidden" id="selectedLocation" name="selectedLocation" value="">
                    </div>
                </div>

                <button type="submit" class="submit-btn">Create Profile & Start Matching</button>
            </form>
        </div>
    </div>

    <!-- AI Matching Section -->
    <div id="matchingSection" class="section">
        <div class="container">
            <div class="matching-header">
                <h1>ü§ñ AI Team Matching</h1>
                <p>Based on your profile, here are your perfect matches</p>
            </div>

            <!-- Matching Chat/Display Area -->
            <div class="matching-container">
                <!-- User Profile Summary -->
                <div class="user-profile-summary">
                    <h3>Your Profile</h3>
                    <div id="profileSummary" class="summary-content">
                    </div>
                </div>

                <!-- AI Matching Results -->
                <div class="matches-area">
                    <div class="ai-message">
                        <div class="message-content">
                            <p>üéØ Analyzing your profile...</p>
                            <p style="font-size: 0.9em; color: #b0b0d0; margin-top: 0.5em;">Using AI to match you with compatible teammates based on skills, personality, and goals.</p>
                        </div>
                    </div>

                    <div id="matchesContainer" class="matches-grid">
                        <!-- AI will generate matches here -->
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="refineMatching()">üîÑ Refine Matches</button>
                    <button class="btn btn-secondary" onclick="viewMoreMatches()">üë• View More Matches</button>
                    <button class="btn btn-success" onclick="startMessaging()">üí¨ Start Messaging Matches</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Profile Modal -->
    <div id="profileModal" class="modal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.6); align-items:center; justify-content:center; z-index:2000;">
        <div class="modal-content" style="background:#0f0f1e; border-radius:12px; padding:1.25rem; width:min(720px,95%); color:#fff; max-height:85%; overflow:auto;">
            <button id="closeProfileModal" style="float:right; background:none; border:none; font-size:1.2rem; color:#fff;">‚úñ</button>
            <div id="profileModalBody"></div>
        </div>
    </div>

    <!-- Chat Modal -->
    <div id="chatModal" class="modal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.6); align-items:center; justify-content:center; z-index:2000;">
        <div class="modal-content" style="background:#0f0f1e; border-radius:12px; padding:0.75rem; width:min(540px,95%); color:#fff; max-height:85%; display:flex; flex-direction:column;">
            <div style="display:flex; align-items:center; justify-content:space-between; padding:0.5rem 0;">
                <strong id="chatWithName">Chat</strong>
                <div>
                    <button id="closeChatModal" style="background:none; border:none; font-size:1.1rem; color:#fff;">‚úñ</button>
                </div>
            </div>
            <div id="chatMessages" style="flex:1; overflow:auto; padding:0.5rem 0; margin-bottom:0.5rem;"></div>
            <form id="chatForm" style="display:flex; gap:0.5rem;">
                <input id="chatInput" type="text" placeholder="Type a message..." style="flex:1; padding:0.5rem; border-radius:8px; border:1px solid rgba(255,255,255,0.08); background:#0b0b12; color:#fff;" required />
                <button type="submit" class="btn btn-primary">Send</button>
            </form>
        </div>
    </div>

    <script src="toast.js"></script>
    <script src="matching.js"></script>
</body>
</html>
